syntax = "proto3";

package compas_pb.data;

// ============================================================================
// Basic Geometry Types
// ============================================================================

message PointData {
  // no inheritance, so Data will have to repeat but apparently
  string guid = 1;
  string name = 2;
  float x = 3;
  float y = 4;
  float z = 5;
}

message VectorData {
  string guid = 1;
  string name = 2;
  float x = 3;
  float y = 4;
  float z = 5;
}

message FrameData {
  string guid = 1;
  string name = 2;
  PointData point = 3;
  VectorData xaxis = 4;
  VectorData yaxis = 5;
}

message PlaneData {
  string guid = 1;
  string name = 2;
  PointData point = 3;
  VectorData normal = 4;
}

message QuaternionData {
    string guid = 1;
    string name = 2;
    float w = 3;
    float x = 4;
    float y = 5;
    float z = 6;
}

// ============================================================================
// Curves
// ============================================================================

message LineData {
  string guid = 1;
  string name = 2;
  PointData start = 3;
  PointData end = 4;
}

message CircleData {
    string guid = 1;
    string name = 2;
    float radius = 3;
    FrameData frame = 4;
}

message ArcData {
  string guid = 1;
  string name = 2;
  CircleData circle = 3;
  float start_angle = 4;
  float end_angle = 5;
}

message EllipseData {
    string guid = 1;
    string name = 2;
    float major = 3;
    float minor = 4;
    FrameData frame = 5;
}

message ParabolaData {
    string guid = 1;
    string name = 2;
    float focal = 3;
    FrameData frame = 4;
}

message HyperbolaData {
    string guid = 1;
    string name = 2;
    float major = 3;
    float minor = 4;
    FrameData frame = 5;
}

message BezierData {
    string guid = 1;
    string name = 2;
    repeated PointData points = 3; // control points
    int32 degree = 4;
}

message PolylineData {
    string guid = 1;
    string name = 2;
    repeated PointData points = 3;
}

message PolygonData {
  string guid = 1;
  string name = 2;
  repeated PointData points = 3;
}

// ============================================================================
// Surfaces
// ============================================================================

message BoxData {
  string guid = 1;
  string name = 2;
  FrameData frame = 3;
  float xsize = 4;
  float ysize = 5;
  float zsize = 6;
}

message SphereData {
    string guid = 1;
    string name = 2;
    float radius = 3;
    FrameData frame = 4;
}

message CylinderData {
    string guid = 1;
    string name = 2;
    float radius = 3;
    float height = 4;
    FrameData frame = 5;
}

message ConeData {
    string guid = 1;
    string name = 2;
    float radius = 3;
    float height = 4;
    FrameData frame = 5;
}

message CapsuleData {
    string guid = 1;
    string name = 2;
    float radius = 3;
    float height = 4;
    FrameData frame = 5;
}

message TorusData {
    string guid = 1;
    string name = 2;
    float radius_axis = 3;
    float radius_pipe = 4;
    FrameData frame = 5;
}

// ============================================================================
// Data Structures
// ============================================================================

message PointcloudData {
    string guid = 1;
    string name = 2;
    repeated PointData points = 3;
}

// ============================================================================
// Transformations
// ============================================================================

message TransformationData {
    string guid = 1;
    string name = 2;
    repeated float matrix = 3; // 4x4 matrix stored as flat array of 16 floats
}

message TranslationData {
    string guid = 1;
    string name = 2;
    VectorData translation_vector = 3;
}

message RotationData {
    string guid = 1;
    string name = 2;
    VectorData axis = 3;
    float angle = 4;
    PointData point = 5; // point of rotation (optional, default to origin)
}

message ScaleData {
    string guid = 1;
    string name = 2;
    repeated float matrix = 3; // 4x4 matrix stored as flat array of 16 floats
}

message ReflectionData {
    string guid = 1;
    string name = 2;
    repeated float matrix = 3; // 4x4 matrix stored as flat array of 16 floats
}

message ShearData {
    string guid = 1;
    string name = 2;
    repeated float matrix = 3; // 4x4 matrix stored as flat array of 16 floats
}

message ProjectionData {
    string guid = 1;
    string name = 2;
    repeated float matrix = 3; // 4x4 matrix stored as flat array of 16 floats
}
